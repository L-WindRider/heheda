<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
<script type="text/JavaScript">
<!--
function MM_jumpMenu(targ,selObj,restore){ //v3.0
  eval(targ+".location='"+selObj.options[selObj.selectedIndex].value+"'");
  if (restore) selObj.selectedIndex=0;
}
//-->
</script>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>角色管理</title>
<link href="../css/css.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
function BtHide(id){var Div = document.getElementById(id);if(Div){Div.style.display="none"}}
function BtShow(id){var Div = document.getElementById(id);if(Div){Div.style.display="block"}}

function BtTabRemove(index,head,divs) {
	var tab_heads = document.getElementById(head);
	if (tab_heads) {
	var lis = tab_heads.getElementsByTagName("li"); var as = tab_heads.getElementsByTagName("a");
	for(var i=0;i<as.length;i++){lis[i].className = "";BtHide(divs+"_"+i);if (i==index) {lis[i].className = "current";}}
	BtShow(divs+"_"+index)}
}

function BtTabOn(head,divs){
	var tab_heads=document.getElementById(head);
	if (tab_heads) {
	BtTabRemove(0,head,divs);
	var alis=tab_heads.getElementsByTagName("a");
	for(var i=0;i<alis.length;i++) {
	alis[i].num=i;
	alis[i].onclick = function(){BtTabRemove(this.num,head,divs);this.blur();return false;}
	alis[i].onfocus = function(){BtTabRemove(this.num,head,divs)}}}
}

function BtZebraStrips(id,tag) {
	var ListId = document.getElementById(id);
	if(ListId){
	var tags  = ListId.getElementsByTagName(tag);
	for(var i=0;i<tags.length;i++) {
	tags[i].className   += " barry"+i%2;
	tags[i].onmouseover = function(){this.className += " hover"}
	tags[i].onmouseout  = function(){this.className = this.className.replace(" hover","")}}}
}

function BtPopload(showId){
	var h = Math.max(document.documentElement.scrollHeight,document.documentElement.clientHeight) + 'px';
	var w = document.documentElement.scrollWidth + 'px';
	var popCss = "background:#000;opacity:0.1;filter:alpha(opacity=10);position:absolute;left:0;top:0;overflow:hidden;"
	var exsit = document.getElementById("popBox");
	if (!exsit) {
		pop_Box = document.createElement("div");pop_Box.id = "popBox";
		document.getElementsByTagName("body")[0].appendChild(pop_Box);
		pop_Box.style.cssText = popCss;pop_Box.style.zIndex = "10";
		pop_Box.style.height = h;pop_Box.style.width = w;
		
		pop_Iframe = document.createElement("iframe");pop_Iframe.id = "popIframe";
		document.getElementsByTagName("body")[0].appendChild(pop_Iframe);	
		pop_Iframe.style.cssText = popCss;pop_Iframe.style.zIndex = "9";
		pop_Iframe.style.height = h;pop_Iframe.style.width = (parseInt(w)-5)+"px";
	}
	BtShow("popIframe");BtShow("popBox");BtShow(showId);
	pop_Win = document.getElementById(showId);
	pop_Win.style.position = "absolute";
	pop_Win.style.zIndex = "11";
	pop_Win.style.top = document.documentElement.scrollTop+document.documentElement.clientHeight/2-pop_Win.offsetHeight/2+ 'px';
	pop_Win.style.left = (document.documentElement.clientWidth/2-pop_Win.offsetWidth/2) + 'px';
}
function BtPopShow(Bid,Did) { 
	var UploadBtn = document.getElementById(Bid);
	if (UploadBtn){UploadBtn.onclick = function() {BtPopload(Did);return false;}}	
}
function BtPopHide(Bid,Did) { 
	var UploadBtn = document.getElementById(Bid);
	if (UploadBtn){UploadBtn.onclick = function() {BtHide(Did);BtHide("popBox");BtHide("popIframe");return false;}}	
}
</script>

</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td height="41" style="line-height:41px;" background="../images/right_01.gif"><div style="width:41px; height:41px; background-image:url(../images/cent_01.gif); float:left;"></div>
      角色管理</td>
  </tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-left:#c4dbe2 1px solid; border-bottom:#c4dbe2 1px solid;">
  <tr>
    <td height="88" background="../images/right_t_09.gif"><table width="800" height="36" border="0" cellpadding="0" cellspacing="2" style="margin-left:28px; margin-top:2px;">
      <tr>
        <td width="60" align="right">角色名称</td>
        <td><input type="text" name="textfield4" class="wbk" /></td>
        <td align="right"><input name="submit2332" type="submit" class="inp_L1" style="margin-right:8px;" onmouseover="this.className='inp_L2'" onmouseout="this.className='inp_L1'" value="查询" />
          <input name="submit23" type="submit" class="inp_L1" style="margin-right:8px;" onmouseover="this.className='inp_L2'" onmouseout="this.className='inp_L1'" value="新增" id="open" />
              <input name="submit23223" type="submit" class="inp_L1" style="margin-right:8px;" onmouseover="this.className='inp_L2'" onmouseout="this.className='inp_L1'" value="删除" /></td>
      </tr>
    </table></td>
  </tr>
</table>
<div class="hot_car">
<table width="100%" cellpadding="0" cellspacing="0" class="table_bk">
  <thead>
    <tr style="background-color:#e8f1f4; color:#333;">
      <td width="30" align="center"><input type="checkbox" name="checkbox" value="checkbox" /></td>
      <td>角色编号</td>
      <td align="center">角色名称</td>
      <td align="center">角色描述</td>
      <td align="center"> 排序</td>
      <td align="center">启用</td>
      <td width="30" align="center">编辑</td>
    </tr>
  </thead>
  <tr>
    <td align="center"><input type="checkbox" name="checkbox2" value="checkbox" /></td>
    <td>08908</td>
    <td align="center">一号楼</td>
    <td align="center">一号楼</td>
    <td align="center"> 综合管理部 </td>
    <td align="center">一号楼网关</td>
    <td align="center"><img src="../images/bj.gif" width="12" height="12" /></td>
  </tr>
  <tr bgcolor="#f1f1f1">
    <td align="center"><input type="checkbox" name="checkbox3" value="checkbox" /></td>
    <td>08908</td>
    <td align="center">一号楼</td>
    <td align="center">一号楼</td>
    <td align="center"> 综合管理部 </td>
    <td align="center">一号楼网关</td>
    <td align="center"><img src="../images/bj.gif" width="12" height="12" /></td>
  </tr>
  <tr>
    <td align="center"><input type="checkbox" name="checkbox4" value="checkbox" /></td>
    <td>08908</td>
    <td align="center">一号楼</td>
    <td align="center">一号楼</td>
    <td align="center"> 综合管理部 </td>
    <td align="center">一号楼网关</td>
    <td align="center"><img src="../images/bj.gif" width="12" height="12" /></td>
  </tr>
  <tr>
    <td align="center"><input type="checkbox" name="checkbox5" value="checkbox" /></td>
    <td>08908</td>
    <td align="center">一号楼</td>
    <td align="center">一号楼</td>
    <td align="center"> 综合管理部 </td>
    <td align="center">一号楼网关</td>
    <td align="center"><img src="../images/bj.gif" width="12" height="12" /></td>
  </tr>
  <tr>
    <td align="center"><input type="checkbox" name="checkbox6" value="checkbox" /></td>
    <td>08908</td>
    <td align="center">一号楼</td>
    <td align="center">一号楼</td>
    <td align="center"> 综合管理部 </td>
    <td align="center">一号楼网关</td>
    <td align="center"><img src="../images/bj.gif" width="12" height="12" /></td>
  </tr>
  <tr>
    <td align="center"><input type="checkbox" name="checkbox7" value="checkbox" /></td>
    <td>08908</td>
    <td align="center">一号楼</td>
    <td align="center">一号楼</td>
    <td align="center"> 综合管理部 </td>
    <td align="center">一号楼网关</td>
    <td align="center"><img src="../images/bj.gif" width="12" height="12" /></td>
  </tr>
  <tr>
    <td align="center"><input type="checkbox" name="checkbox8" value="checkbox" /></td>
    <td>08908</td>
    <td align="center">一号楼</td>
    <td align="center">一号楼</td>
    <td align="center"> 综合管理部 </td>
    <td align="center">一号楼网关</td>
    <td align="center"><img src="../images/bj.gif" width="12" height="12" /></td>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0" class="table_fy">
  <tr>
    <td align="center"><table width="528" border="0" align="center" cellpadding="0" cellspacing="0">
      <tr>
        <td width="200" align="left"><a href="#"><img src="../images/y_01.gif" width="16" height="16" border="0" style="vertical-align:middle;" /></a> <a href="#"><img src="../images/y_02.gif" width="16" height="16" border="0" style="vertical-align:middle;" /></a> Page <span class="font01">1</span> of <span class="font01">12 <a href="#"><img src="../images/y_03.gif" width="16" height="16" border="0" style="vertical-align:middle;" /></a> <a href="#"><img src="../images/y_04.gif" width="16" height="16" border="0" style="vertical-align:middle;" /></a> </span> </td>
        <td width="220" align="center">每页显示记录条数
          <select name="menu1" onchange="MM_jumpMenu('parent',this,0)" style="width:47px;" >
                <option>10</option>
                <option>20</option>
                <option>30</option>
            </select></td>
        <td align="left">跳转
          <input type="text" name="textfield52" style="width:28px;" />
            <a href="#"><img src="../images/y_05.gif" width="16" height="16" border="0" style="vertical-align:middle;"/></a></td>
      </tr>
    </table></td>
  </tr>
</table>
<div class="pop" id="pop">
<table width="520" height="218" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr>
    <td height="200" valign="top" background="../images/tc_top.gif">
	<table width="520" height="21" border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td valign="bottom" style="font-size:12px; text-align:center; color:#FFFFFF; font-weight:bold; line-height:21px;">数据分发新增</td>
        <td width="30">
		<a href="../history.go(0)">
		<input type="submit" style="color:#FF0000; width:30px; height:21px; border:0; font-size:12px; display：inline; background-image:url(../images/tc.gif); background-position:center; background-repeat:no-repeat; cursor:hand"
	id="cancel" value="" /></a>	</td>
      </tr>
    </table>
	<table width="520" border="0" align="center" cellpadding="0" cellspacing="0" style=" margin-top:18px;">
      <tr>
        <td>
		<table width="520" border="0" align="center" cellpadding="0" cellspacing="2" style="margin-top:2px;">
            <tr>
              <td width="280" align="right" valign="top"><table width="100%" border="0" align="center" cellpadding="0" cellspacing="2" style="margin-top:2px;">
                <tr>
                  <td width="85" height="32" align="right">角色名称</td>
                  <td width="248" align="left"><input type="text" name="textfield2" class="wbk" /></td>
                </tr>
                <tr>
                  <td height="32" align="right">角色描述</td>
                  <td align="left"><input type="text" name="textfield22" class="wbk" /></td>
                </tr>
                <tr>
                  <td height="32" align="right">排序</td>
                  <td align="left"><textarea name="textfield52" class="wbk" style="height:69px;"></textarea></td>
                </tr>
                <tr>
                  <td height="32" align="right">启用标识</td>
                  <td align="left"><select name="select3" class="dxk">
                  </select></td>
                </tr>
              </table>			  </td>
              <td width="234" valign="top">
			  <div id="mess_box" style="padding:0 0 0 0; height:198px; width:189px; OVERFLOW-y:auto; border-bottom:#bfe0e9 solid 0px;">
        <ul id="root">
          <li>
            <label><a href="javascript:;">多级菜单一</a></label>
            <ul class="two">
              <li>
                <label><a href="javascript:;">菜单二</a></label>
                <ul class="two">
                  <li>
                    <label><a href="javascript:;">菜单三</a></label>
                    <ul class="two">
                      <li>
                        <label><a href="javascript:;">菜单三</a></label>
                      </li>
                      <li>
                        <label><a href="javascript:;">菜单四</a></label>
                        <ul class="two">
                          <li>
                            <label><a href="javascript:;">菜单四</a></label>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>
			  </li>
            </ul>
          </li>
        </ul>
      </div>
      <script type="text/javascript" >
	function addEvent(el,name,fn){//绑定事件
		if(el.addEventListener) return el.addEventListener(name,fn,false);
		return el.attachEvent('on'+name,fn);
	}
	function nextnode(node){//寻找下一个兄弟并剔除空的文本节点
		if(!node)return ;
		if(node.nodeType == 1)
			return node;
		if(node.nextSibling)
			return nextnode(node.nextSibling);
	} 
	function prevnode(node){//寻找上一个兄弟并剔除空的文本节点
		if(!node)return ;
		if(node.nodeType == 1)
			return node;
		if(node.previousSibling)
			return prevnode(node.previousSibling);
	} 
	function parcheck(self,checked){//递归寻找父亲元素，并找到input元素进行操作
		var par =  prevnode(self.parentNode.parentNode.parentNode.previousSibling),parspar;
		if(par&&par.getElementsByTagName('input')[0]){
			par.getElementsByTagName('input')[0].checked = checked;
			parcheck(par.getElementsByTagName('input')[0],sibcheck(par.getElementsByTagName('input')[0]));
		}			
	}
	function sibcheck(self){//判断兄弟节点是否已经全部选中
		var sbi = self.parentNode.parentNode.parentNode.childNodes,n=0;
		for(var i=0;i<sbi.length;i++){
			if(sbi[i].nodeType != 1)//由于孩子结点中包括空的文本节点，所以这里累计长度的时候也要算上去
				n++;
			else if(sbi[i].getElementsByTagName('input')[0].checked)
				n++;
		}
		return n==sbi.length?true:false;
	}
	addEvent(document.getElementById('root'),'click',function(e){//绑定input点击事件，使用root根元素代理
		e = e||window.event;
		var target = e.target||e.srcElement;
		var tp = nextnode(target.parentNode.nextSibling);
		switch(target.nodeName){
			case 'A'://点击A标签展开和收缩树形目录，并改变其样式会选中checkbox
				if(tp&&tp.nodeName == 'UL'){
					if(tp.style.display != 'block' ){
						tp.style.display = 'block';
						prevnode(target.parentNode.previousSibling).className = 'ren'
					}else{
						tp.style.display = 'none';
						prevnode(target.parentNode.previousSibling).className = 'add'
					}	
				}
				break;
			case 'SPAN'://点击图标只展开或者收缩
				var ap = nextnode(nextnode(target.nextSibling).nextSibling);
				if(ap.style.display != 'block' ){
					ap.style.display = 'block';
					target.className = 'ren'
				}else{
					ap.style.display = 'none';
					target.className = 'add'
				}
				break;
			case 'INPUT'://点击checkbox，父亲元素选中，则孩子节点中的checkbox也同时选中，孩子结点取消父元素随之取消
				if(target.checked){
					if(tp){
						var checkbox = tp.getElementsByTagName('input');
						for(var i=0;i<checkbox.length;i++)
							checkbox[i].checked = true;
					} 
				}else{
					if(tp){
						var checkbox = tp.getElementsByTagName('input');
						for(var i=0;i<checkbox.length;i++)
							checkbox[i].checked = false;
					}
				}
				parcheck(target,sibcheck(target));//当孩子结点取消选中的时候调用该方法递归其父节点的checkbox逐一取消选中
				break;
		}
	});
	window.onload = function(){//页面加载时给有孩子结点的元素动态添加图标
		var labels = document.getElementById('root').getElementsByTagName('label');
		for(var i=0;i<labels.length;i++){
			var span = document.createElement('span');
			span.style.cssText ='display:inline-block;height:18px;vertical-align:middle;width:16px;cursor:pointer;';
			span.innerHTML = ' '
			span.className = 'add';
			if(nextnode(labels[i].nextSibling)&&nextnode(labels[i].nextSibling).nodeName == 'UL')
				labels[i].parentNode.insertBefore(span,labels[i]);
			else
				labels[i].className = 'rem'
		}
	}
  </script>
			  </td>
              </tr>
          </table>
            <table width="520" border="0" align="center" cellpadding="0" cellspacing="0" style="margin-top:2px;">
              <tr>
                <td height="32" align="center"><input name="submit243" type="submit" class="inp_L1" style="margin-right:29px;" onmouseover="this.className='inp_L2'" onmouseout="this.className='inp_L1'"onclick="history.go(0)" value="保 存" />
                    <input name="submit2322" type="submit" class="inp_L1"  onmouseover="this.className='inp_L2'" onmouseout="this.className='inp_L1'" id="close" value="取 消" /></td>
              </tr>
          </table></td>
      </tr>
    </table></td>
  </tr>
  <tr>
    <td height="18" background="../images/tc_bot.gif">&nbsp;</td>
  </tr>
</table>
<script type="text/javascript">BtPopShow("open","pop");BtPopHide("close","pop");BtPopHide("cancel","pop")</script>
</div>
</body>
</html>
