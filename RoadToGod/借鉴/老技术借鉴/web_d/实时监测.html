<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>实时监测</title>
<link href="../css/css.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
function BtHide(id){var Div = document.getElementById(id);if(Div){Div.style.display="none"}}
function BtShow(id){var Div = document.getElementById(id);if(Div){Div.style.display="block"}}

function BtTabRemove(index,head,divs) {
	var tab_heads = document.getElementById(head);
	if (tab_heads) {
	var lis = tab_heads.getElementsByTagName("li"); var as = tab_heads.getElementsByTagName("a");
	for(var i=0;i<as.length;i++){lis[i].className = "";BtHide(divs+"_"+i);if (i==index) {lis[i].className = "current";}}
	BtShow(divs+"_"+index)}
}

function BtTabOn(head,divs){
	var tab_heads=document.getElementById(head);
	if (tab_heads) {
	BtTabRemove(0,head,divs);
	var alis=tab_heads.getElementsByTagName("a");
	for(var i=0;i<alis.length;i++) {
	alis[i].num=i;
	alis[i].onclick = function(){BtTabRemove(this.num,head,divs);this.blur();return false;}
	alis[i].onfocus = function(){BtTabRemove(this.num,head,divs)}}}
}

function BtZebraStrips(id,tag) {
	var ListId = document.getElementById(id);
	if(ListId){
	var tags  = ListId.getElementsByTagName(tag);
	for(var i=0;i<tags.length;i++) {
	tags[i].className   += " barry"+i%2;
	tags[i].onmouseover = function(){this.className += " hover"}
	tags[i].onmouseout  = function(){this.className = this.className.replace(" hover","")}}}
}

function BtPopload(showId){
	var h = Math.max(document.documentElement.scrollHeight,document.documentElement.clientHeight) + 'px';
	var w = document.documentElement.scrollWidth + 'px';
	var popCss = "background:#000;opacity:0.1;filter:alpha(opacity=10);position:absolute;left:0;top:0;overflow:hidden;"
	var exsit = document.getElementById("popBox");
	if (!exsit) {
		pop_Box = document.createElement("div");pop_Box.id = "popBox";
		document.getElementsByTagName("body")[0].appendChild(pop_Box);
		pop_Box.style.cssText = popCss;pop_Box.style.zIndex = "10";
		pop_Box.style.height = h;pop_Box.style.width = w;
		
		pop_Iframe = document.createElement("iframe");pop_Iframe.id = "popIframe";
		document.getElementsByTagName("body")[0].appendChild(pop_Iframe);	
		pop_Iframe.style.cssText = popCss;pop_Iframe.style.zIndex = "9";
		pop_Iframe.style.height = h;pop_Iframe.style.width = (parseInt(w)-5)+"px";
	}
	BtShow("popIframe");BtShow("popBox");BtShow(showId);
	pop_Win = document.getElementById(showId);
	pop_Win.style.position = "absolute";
	pop_Win.style.zIndex = "11";
	pop_Win.style.top = document.documentElement.scrollTop+document.documentElement.clientHeight/2-pop_Win.offsetHeight/2+ 'px';
	pop_Win.style.left = (document.documentElement.clientWidth/2-pop_Win.offsetWidth/2) + 'px';
}
function BtPopShow(Bid,Did) { 
	var UploadBtn = document.getElementById(Bid);
	if (UploadBtn){UploadBtn.onclick = function() {BtPopload(Did);return false;}}	
}
function BtPopHide(Bid,Did) { 
	var UploadBtn = document.getElementById(Bid);
	if (UploadBtn){UploadBtn.onclick = function() {BtHide(Did);BtHide("popBox");BtHide("popIframe");return false;}}	
}
</script>

</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td height="41" style="line-height:41px;" background="../images/right_01.gif"><div style="width:41px; height:41px; background-image:url(../images/cent_01.gif); float:left;"></div>
      实时监测</td>
  </tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="table_dk">
  <tr>
    <td width="170" valign="top">
	<div id="mess_box" style="padding:25px 0 0 0; height:401px; width:175px; OVERFLOW-y:auto; background-color:#FFFFFF;">
        <ul id="root">
          <li>
            <label><a href="javascript:;">多级菜单一</a></label>
            <ul class="two">
              <li>
                <label><a href="javascript:;">菜单二</a></label>
                <ul class="two">
                  <li>
                    <label><a href="javascript:;">菜单三</a></label>
                    <ul class="two">
                      <li>
                        <label><a href="javascript:;">菜单三</a></label>
                      </li>
                      <li>
                        <label><a href="javascript:;">菜单四</a></label>
                        <ul class="two">
                          <li>
                            <label><a href="javascript:;">菜单四</a></label>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li> </li>
            </ul>
          </li>
          <li>
            <label><a href="javascript:;">多级菜单一</a></label>
            <ul class="two">
              <li>
                <label><a href="javascript:;">菜单二</a></label>
                <ul class="two">
                  <li>
                    <label><a href="javascript:;">菜单三</a></label>
                    <ul class="two">
                      <li>
                        <label><a href="javascript:;">菜单三</a></label>
                      </li>
                      <li>
                        <label><a href="javascript:;">菜单四</a></label>
                        <ul class="two">
                          <li>
                            <label><a href="javascript:;">菜单四</a></label>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>
			  </li>
            </ul>
          </li>
        </ul>
      </div>
      <script type="text/javascript" >
	function addEvent(el,name,fn){//绑定事件
		if(el.addEventListener) return el.addEventListener(name,fn,false);
		return el.attachEvent('on'+name,fn);
	}
	function nextnode(node){//寻找下一个兄弟并剔除空的文本节点
		if(!node)return ;
		if(node.nodeType == 1)
			return node;
		if(node.nextSibling)
			return nextnode(node.nextSibling);
	} 
	function prevnode(node){//寻找上一个兄弟并剔除空的文本节点
		if(!node)return ;
		if(node.nodeType == 1)
			return node;
		if(node.previousSibling)
			return prevnode(node.previousSibling);
	} 
	function parcheck(self,checked){//递归寻找父亲元素，并找到input元素进行操作
		var par =  prevnode(self.parentNode.parentNode.parentNode.previousSibling),parspar;
		if(par&&par.getElementsByTagName('input')[0]){
			par.getElementsByTagName('input')[0].checked = checked;
			parcheck(par.getElementsByTagName('input')[0],sibcheck(par.getElementsByTagName('input')[0]));
		}			
	}
	function sibcheck(self){//判断兄弟节点是否已经全部选中
		var sbi = self.parentNode.parentNode.parentNode.childNodes,n=0;
		for(var i=0;i<sbi.length;i++){
			if(sbi[i].nodeType != 1)//由于孩子结点中包括空的文本节点，所以这里累计长度的时候也要算上去
				n++;
			else if(sbi[i].getElementsByTagName('input')[0].checked)
				n++;
		}
		return n==sbi.length?true:false;
	}
	addEvent(document.getElementById('root'),'click',function(e){//绑定input点击事件，使用root根元素代理
		e = e||window.event;
		var target = e.target||e.srcElement;
		var tp = nextnode(target.parentNode.nextSibling);
		switch(target.nodeName){
			case 'A'://点击A标签展开和收缩树形目录，并改变其样式会选中checkbox
				if(tp&&tp.nodeName == 'UL'){
					if(tp.style.display != 'block' ){
						tp.style.display = 'block';
						prevnode(target.parentNode.previousSibling).className = 'ren'
					}else{
						tp.style.display = 'none';
						prevnode(target.parentNode.previousSibling).className = 'add'
					}	
				}
				break;
			case 'SPAN'://点击图标只展开或者收缩
				var ap = nextnode(nextnode(target.nextSibling).nextSibling);
				if(ap.style.display != 'block' ){
					ap.style.display = 'block';
					target.className = 'ren'
				}else{
					ap.style.display = 'none';
					target.className = 'add'
				}
				break;
			case 'INPUT'://点击checkbox，父亲元素选中，则孩子节点中的checkbox也同时选中，孩子结点取消父元素随之取消
				if(target.checked){
					if(tp){
						var checkbox = tp.getElementsByTagName('input');
						for(var i=0;i<checkbox.length;i++)
							checkbox[i].checked = true;
					} 
				}else{
					if(tp){
						var checkbox = tp.getElementsByTagName('input');
						for(var i=0;i<checkbox.length;i++)
							checkbox[i].checked = false;
					}
				}
				parcheck(target,sibcheck(target));//当孩子结点取消选中的时候调用该方法递归其父节点的checkbox逐一取消选中
				break;
		}
	});
	window.onload = function(){//页面加载时给有孩子结点的元素动态添加图标
		var labels = document.getElementById('root').getElementsByTagName('label');
		for(var i=0;i<labels.length;i++){
			var span = document.createElement('span');
			span.style.cssText ='display:inline-block;height:18px;vertical-align:middle;width:16px;cursor:pointer;';
			span.innerHTML = ' '
			span.className = 'add';
			if(nextnode(labels[i].nextSibling)&&nextnode(labels[i].nextSibling).nodeName == 'UL')
				labels[i].parentNode.insertBefore(span,labels[i]);
			else
				labels[i].className = 'rem'
		}
	}
  </script>
    </td>
    <td valign="top">
<table width="420" height="128" border="0" cellpadding="0" cellspacing="0" class="table_bk" style="margin-top:18px; border-right:#c4dbe2 solid 1px;">
  <tr>
    <td colspan="4" align="center"><img src="../images/b.jpg" width="371" height="186" hspace="10" vspace="10" /></td>
  </tr>
</table>
<table width="420" cellpadding="0" cellspacing="1" class="table_bk" style="margin-top:18px; border-right:#c4dbe2 solid 1px;">
          <tr style="background-color:#e8f1f4; color:#333;">
            <td width="60">表名</td>
            <td width="100" align="left" bgcolor="#FFFFFF">学校表</td>
            <td width="60" align="left"> 状态</td>
            <td align="left" bgcolor="#FFFFFF">在线</td>
          </tr>
        <tr>
          <td bgcolor="#f9f9f9">电表编号</td>
          <td align="left" bgcolor="#FFFFFF">1001001001</td>
          <td align="left" bgcolor="#f9f9f9"> 电表类型 </td>
          <td align="left" bgcolor="#FFFFFF">智能三相表</td>
        </tr>
        <tr bgcolor="#f1f1f1">
          <td bgcolor="#E8F1F4">计量性质</td>
          <td align="left" bgcolor="#FFFFFF">综合表</td>
          <td align="left" bgcolor="#E8F1F4"> 分级 </td>
          <td align="left" bgcolor="#FFFFFF">一级</td>
        </tr>
        <tr>
          <td bgcolor="#f9f9f9">所属部门</td>
          <td align="left" bgcolor="#FFFFFF">学校</td>
          <td align="left" bgcolor="#f9f9f9"> 安装位置 </td>
          <td align="left" bgcolor="#FFFFFF">学校</td>
        </tr>
        <tr>
          <td bgcolor="#E8F1F4">备注:</td>
          <td colspan="3" align="left" bgcolor="#FFFFFF">能耗平台－数据字典类型维护</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<script type="text/javascript">BtZebraStrips("hot_car","tr");BtZebraStrips("ul","li")</script>

<div class="pop" id="pop">
<table width="520" height="218" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr>
    <td height="200" valign="top" background="../images/tc_top.gif">
	<table width="520" height="21" border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td valign="bottom" style="font-size:12px; text-align:center; color:#FFFFFF; font-weight:bold; line-height:21px;">新增组织结构</td>
        <td width="30">
		<a href="history.go(0)">
		<input type="submit" style="color:#FF0000; width:30px; height:21px; border:0; font-size:12px; display：inline; background-image:url(../images/tc.gif); background-position:center; background-repeat:no-repeat; cursor:hand"
	id="cancel" value="" /></a>	</td>
      </tr>
    </table>
	<table width="520" border="0" align="center" cellpadding="0" cellspacing="0" style=" margin-top:18px;">
      <tr>
        <td>
		<table width="520" border="0" align="center" cellpadding="0" cellspacing="2" style="margin-top:2px;">
            <tr>
              <td width="120" height="32" align="right">机构名称</td>
              <td width="170"><input type="text" name="textfield" class="wbk" />
                <span class="font02">                * </span></td>
              <td width="60" align="right">机构层级</td>
              <td width="170"><input type="text" name="textfield2" class="wbk" /></td>
            </tr>
            <tr>
              <td height="32" align="right">机构排序</td>
              <td><input type="text" name="textfield5" class="wbk" />
                <span class="font02"> * </span></td>
              <td align="right">责任人</td>
              <td><input type="text" name="textfield3" class="wbk" /></td>
            </tr>
            <tr>
              <td height="32" align="right">联系电话</td>
              <td><input type="text" name="textfield6" class="wbk" /></td>
              <td align="right">&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
          </table>
            <table width="520" border="0" align="center" cellpadding="0" cellspacing="0" style="margin-top:2px;">
              <tr>
                <td height="32" align="center"><input name="submit243" type="submit" class="inp_L1" style="margin-right:29px;" onmouseover="this.className='inp_L2'" onmouseout="this.className='inp_L1'"onclick="history.go(0)" value="保 存" />
                    <input name="submit2322" type="submit" class="inp_L1"  onmouseover="this.className='inp_L2'" onmouseout="this.className='inp_L1'" id="close" value="取 消" /></td>
              </tr>
          </table></td>
      </tr>
    </table></td>
  </tr>
  <tr>
    <td height="18" background="../images/tc_bot.gif">&nbsp;</td>
  </tr>
</table>
<script type="text/javascript">BtPopShow("open","pop");BtPopHide("close","pop");BtPopHide("cancel","pop")</script>
</div>
</body>
</html>
